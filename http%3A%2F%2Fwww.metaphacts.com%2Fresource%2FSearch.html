<ol class="page-breadcrumb">
  <li>
    <mp-link title="Home" url="/">Home</mp-link>
  </li>
</ol>

<div class="page">
  <div class="SplitPane  vertical " style="flex-direction: row; flex: 1 1 0%; user-select: text; overflow: hidden; position: absolute; height: 100%; left: 0px; right: 0px; outline: none; display: -webkit-flex;"> 
       
    <div class="Pane vertical Pane1" style="flex: 0 0 auto; position: relative; outline: none;">
    	[[#>rsi:ClipboardSidebar]]
    	[[/rsi:ClipboardSidebar]]
  	</div>
  	<div class="Pane vertical Pane2" style="flex: 1 1 0%; position: relative; outline: none; width: 25%;">

<semantic-search
    categories='{
                    "<http://www.w3.org/2001/XMLSchema#Decimal>": [{
                      "kind": "numeric-range",
                      "queryPattern": "{
                        $subject ?__relation__ ?literal .
                        FILTER(?literal >= ?__numericRangeBeginValue__) .
                        FILTER(?literal <= ?__numericRangeEndValue__) .
                      }"
                    }],
                    "<http://www.w3.org/2000/01/rdf-schema#Literal>": [{
                      "kind": "literal",
                      "queryPattern": "{
                        $subject ?__relation__ ?__literal__ .
                      }"
                    }],
                    "<http://www.w3.org/2001/XMLSchema#date>": [{
                       "kind": "date-range",
                       "queryPattern": "
                         {
                           $subject ?__relation__ ?dateRaw .
                           BIND(STRDT(CONCAT(STR(?dateRaw),\"T00:00:00Z\"), <http://www.w3.org/2001/XMLSchema#dateTime>) as ?date)
                           BIND(STRDT(CONCAT(STR(?__dateEndValue__),\"T00:00:00Z\"), <http://www.w3.org/2001/XMLSchema#dateTime>) as ?dateTimeEndValue)
                           BIND(STRDT(CONCAT(STR(?__dateBeginValue__),\"T00:00:00Z\"), <http://www.w3.org/2001/XMLSchema#dateTime>) as ?dateTimeBeginValue)
                           FILTER(?date <= ?dateTimeEndValue) .
                           FILTER(?date >= ?dateTimeBeginValue) .
                         }"
                      }], 
                "<http://www.cidoc-crm.org/cidoc-crm/E62_String>": [
      {
        "kind": "text",
        "queryPattern": "
           {
                
              	$subject a ?__domain__ .
                $subject rdfs:label ?labelvalue.
                ?labelvalue <http://www.bigdata.com/rdf/search#search> ?__value__  .
                ?labelvalue <http://www.bigdata.com/rdf/search#matchAllTerms> \"true\"

                
         }
        "
      }
    ]
                 }'
    relations='{
                   "<http://www.metaphacts.com/ontology/sample/fan_of>": [
                     {
                       "kind": "resource",
                       "queryPattern": "
                       {
                         $subject <http://xmlns.com/foaf/0.1/topic_interest>/<http://purl.org/dc/terms/creator> ?__value__ .
                       }
                       "
                     }
                   ]
                 }'
    search-profile='{ 
                      "categories": [{
                                       "iri": "<https://collection.itatti.harvard.edu/fc/artwork>",
                                       "label": "Artwork",
                    									 "thumbnail": "https://png2.kisspng.com/20180418/vue/kisspng-north-east-school-of-the-arts-fine-art-art-exhibit-white-paint-5ad7663eb91a16.1978996915240658547582.png"
                                     },
                     								 {
                                       "iri": "<https://collection.itatti.harvard.edu/fc/artist>",
                                       "label": "Artist",
                     									 "thumbnail": "http://www.jmkxyy.com/artist-icon/artist-icon-14.jpg"    
                                     },
                   									 {
                                       "iri": "<https://collection.itatti.harvard.edu/fc/institution>",
                                       "label": "Institution",
                     									 "thumbnail": "https://az616578.vo.msecnd.net/files/2016/05/23/635996009742568479-1205526956_institution.png"    
                                     },
                    								 {
                                       "iri": "<https://collection.itatti.harvard.edu/fc/photo>",
                                       "label": "Photo",
                     									 "thumbnail": "https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png"    
                                     },
                    								 {
                                       "iri": "<https://collection.itatti.harvard.edu/fc/place>",
                                       "label": "Place",
                    									 "thumbnail": "https://png.pngtree.com/svg/20160825/location_46254.png"
                                     },
                             				 {
                                       "iri": "<https://collection.itatti.harvard.edu/fc/actor>",
                                       "label": "Actor",
                    									 "thumbnail":"http://honefoss-vaktselskap.no/wp-content/uploads/2012/07/4ibKz78KT.gif"
                                     },   
                    								 {
                                       "iri": "<https://collection.itatti.harvard.edu/fc/thing>",
                                       "label": "Thing",
                    									 "thumbnail":"https://cdn2.iconfinder.com/data/icons/superthick-e-commerce/128/box-delivery-thing-package-512.png"
                                     },
                                     {
                                       "iri": "<http://www.cidoc-crm.org/cidoc-crm/E55_Type>",
                                       "label": "Type",
                    									"thumbnail": " https://cdn4.iconfinder.com/data/icons/education-bold-line-2/49/68-512.png"                    
                                     },
                     								 {
                                       "iri": "<https://collection.itatti.harvard.edu/Source>",
                                       "label": "Source",
                    									"thumbnail": " https://icon2.kisspng.com/20180419/dzq/kisspng-datasource-computer-icons-database-psd-source-file-5ad821934c44a7.1028047615241138113124.jpg"                    
                                     },
                   									 {
                                       "iri": "<http://www.cidoc-crm.org/cidoc-crm/E62_String>",
                                       "label": "Text Search",
                    									"thumbnail": " https://upload.wikimedia.org/wikipedia/en/thumb/1/11/Fast_text.png/600px-Fast_text.png"                    
                                     }
                                  ],
                    
                      "relations": [{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/created_by>",
                                      "label": "was created by",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/artwork>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/artist>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/created>",
                                      "label": "created",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/artist>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/artwork>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/depicted_by>",
                                      "label": "depicted by",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/artwork>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/photo>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/depicted>",
                                      "label": "depicted",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/photo>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/artwork>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/has_keeper>",
                                      "label": "has keeper",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/artwork>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/institution>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/is_keeper_of>",
                                      "label": "is keeper of",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/institution>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/artwork>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/has_owner>",
                                      "label": "has owner",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/artwork>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/actor>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/is_owner_of>",
                                      "label": "is owner of",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/actor>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/artwork>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/has_place>",
                                      "label": "has place",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/actor>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/place>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/is_place_of>",
                                      "label": "is place of",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/place>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/actor>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/artist_is_related_to_photo>",
                                      "label": "is related to",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/artist>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/photo>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/photo_is_related_to_artist>",
                                      "label": "is related to",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/photo>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/artist>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/thing_is_related_to_actor>",
                                      "label": "is related to",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/thing>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/actor>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/actor_is_related_to_thing>",
                                      "label": "is related to",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/actor>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/thing>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/artwork_is_related_to_place>",
                                      "label": "is related to",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/artwork>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/place>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/place_is_related_to_artwork>",
                                      "label": "is related to",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/place>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/fc/artwork>"
                                    },
                    								{
                                      "iri": "<http://www.cidoc-crm.org/cidoc-crm/P2_has_type>",
                                      "label": "has type",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/thing>",
                                      "hasRange": "<http://www.cidoc-crm.org/cidoc-crm/E55_Type>"
                                    },
                    								{
                                      "iri": "<https://collection.itatti.harvard.edu/fr/has_source>",
                                      "label": "has provenance",
                                      "hasDomain": "<https://collection.itatti.harvard.edu/fc/thing>",
                                      "hasRange": "<https://collection.itatti.harvard.edu/Source>"
                                    }
                                   ]
                    }'
>

    <semantic-search-query-builder></semantic-search-query-builder>
    <div data-flex-layout="row stretch-stretch">
        <div
            data-flex-self="size-1of3"
            style="flex: 0 0 20px;"
        >
            <semantic-search-facet
                value-categories='{
          "<http://www.w3.org/2001/XMLSchema#date>": {
             "kind": "date-range",
             "valuesQuery": "
             SELECT ?dateBeginValue ?dateEndValue WHERE {
               <http://www.bigdata.com/queryHints#Group> <http://www.bigdata.com/queryHints#optimizer> \"None\".
               $subject ?__relation__ ?dateBeginValue .
               BIND(?dateBeginValue as ?dateEndValue) .
             } ORDER BY ?dateBeginValue"
          },
          "<http://www.w3.org/2001/XMLSchema#Decimal>": {
            "kind": "numeric-range",
            "valuesQuery": "
              SELECT ?literal (COUNT(DISTINCT $subject) AS ?count) WHERE {
                $subject ?__relation__ ?literal .
              }
              GROUP BY ?literal
              ORDER BY ?literal
            "
          },
          "<http://www.w3.org/2000/01/rdf-schema#Literal>": {
            "kind": "literal",
            "valuesQuery": "
              SELECT ?literal (COUNT(DISTINCT $subject) AS ?count) WHERE {
                $subject ?__relation__ ?literal .
              } 
              GROUP BY ?literal
              ORDER BY ?literal
            "
          }
        }'
            ></semantic-search-facet>
        </div>
        <semantic-search-result-holder>
            <div data-flex-self="md-full">
                <semantic-search-result>
                    <mp-sparql-result-counts
                        id="query-count"
                        query="SELECT DISTINCT * {}"
                        template='{{#if hasLimit}} <bs-alert bs-style="warning">
                                               Showing {{numberOfResults}} of {{totalNumberOfResults}} matches. <strong>Please, refine your search.</strong> </bs-alert>
                                               {{else}}<span> found {{numberOfResults}} matches </span>{{/if}}'
                    >
                    </mp-sparql-result-counts>
                </semantic-search-result>
                <bs-tabs
                    unmount-on-exit="true"
                    id="search-results"
                    animation="false"
                >
                    <bs-tab
                        event-key="1"
                        title="Grid"
                    >
                        <bs-alert bs-style="info"> Only entities with image representation are shown in the Grid! </bs-alert>
                        <semantic-search-result>
                            <semantic-table
                                id="grid-result"
                                query='
                                  PREFIX schema: <http://schema.org/>
  
                                  SELECT DISTINCT ?subject  (SAMPLE(?thumbnail1) as ?thumbnail)   WHERE {
                                    OPTIONAL { 	 { ?subject owl:sameAs ?wikidata_uri. ?wikidata_uri <http://www.cidoc-crm.org/cidoc-crm/P138i_has_representation> ?image} UNION {?subject <http://www.cidoc-crm.org/cidoc-crm/P46_is_composed_of> ?recto . ?recto <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <http://vocab.getty.edu/aat/300078817> . ?recto <http://www.cidoc-crm.org/cidoc-crm/P136_has_representation> ?visual_part.  ?visual_part <http://www.cidoc-crm.org/cidoc-crm/P138_has_representation> ?image} UNION {?subject <http://www.cidoc-crm.org/cidoc-crm/P46_is_composed_of> ?verso . ?verso <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <http://vocab.getty.edu/aat/300010292> . ?verso <http://www.cidoc-crm.org/cidoc-crm/P136_has_representation> ?visual_part.  ?visual_part <http://www.cidoc-crm.org/cidoc-crm/P138_has_representation> ?image} UNION {?subject <http://www.cidoc-crm.org/cidoc-crm/P46_is_composed_of> ?recto .   ?recto <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <http://vocab.getty.edu/aat/300078817> .   ?recto <http://www.cidoc-crm.org/cidoc-crm/P138_has_representation> ?value. BIND(CONCAT(STR(?value),"/full/full/0/default.jpg") as ?image)} UNION  {?subject <http://www.cidoc-crm.org/cidoc-crm/P62_depicts> ?artwork . ?artwork <http://www.cidoc-crm.org/cidoc-crm/P46_is_composed_of> ?verso . ?verso <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <http://vocab.getty.edu/aat/300010292> .  ?verso <http://www.cidoc-crm.org/cidoc-crm/P138_has_representation> ?value.  BIND(CONCAT(STR(?value),"/full/full/0/default.jpg") as ?image)}UNION {?subject  a <http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>. ?subject<http://www.cidoc-crm.org/cidoc-crm/P16i_was_used_for> ?production . ?production <http://www.cidoc-crm.org/cidoc-crm/P92_brought_into_existence> ?photo. ?photo <http://www.cidoc-crm.org/cidoc-crm/P138i_has_representation> ?value .BIND(REPLACE(STR(?value),"http","https") as ?image) } UNION {?artwork a <http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object> . ?artwork <http://www.cidoc-crm.org/cidoc-crm/P129_is_subject_of> ?paragraph .  ?paragraph  <http://www.cidoc-crm.org/cidoc-crm/P148_is_component_of> ?subject . ?subject <http://www.cidoc-crm.org/cidoc-crm/P138_has_representation> ?image}}
  
                                    BIND(
                                      REPLACE(
                                        COALESCE(
                                          STR(?image),
                                          "//upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/200px-No_image_available.svg.png"
                                        ),
                                        "http://", "//"
                                      ) as ?thumbnail1
                                    ).
                                  } GROUP BY ?subject'
                                tuple-template="{{>tupleTemplate}}"
                                options:='{"showFilter":false, "resultsPerPage":16}'
                            >
                                <template id="tupleTemplate">
                    <div class="rs-grid-element text-center panel panel-default">
                      <div class="panel-body">
                        <img src="{{thumbnail.value}}" style="height:120px;max-width:150px;" class="img-rounded">
                      </div>
                      <div class="panel-footer" style="position: relative">
                        <semantic-link class="grid-resource-link" uri="{{subject.value}}"></semantic-link>
                      </div>
                    </div>
                  </template>
                            </semantic-table>
                        </semantic-search-result>
                    </bs-tab>
                    <bs-tab
                        event-key="2"
                        title="Table"
                    >
                        <semantic-search-result>
                            <semantic-table
                                id="table-result"
                                query="SELECT DISTINCT ?subject WHERE { }"
                                options='{"showFilter":false, "resultsPerPage":10'
                            >
                            </semantic-table>
                        </semantic-search-result>
                    </bs-tab>
                   
                </bs-tabs>

                <bs-panel>
                    <semantic-search-result>
                        <mp-sparql-download
                            id="csv-download"
                            query="SELECT * WHERE { }"
                            header="text/csv"
                            filename="csv-result.csv"
                        >
                            <button class="btn btn-default">Download CSV</button>
                        </mp-sparql-download>
                    </semantic-search-result>
                    <semantic-search-result>
                        <mp-sparql-download
                            id="json-download"
                            query="SELECT * WHERE { }"
                            header="application/sparql-results+json"
                            filename="json-result.json"
                        >
                            <button class="btn btn-default">Download JSON</button>
                        </mp-sparql-download>
                    </semantic-search-result>
                </bs-panel>
            </div>
        </semantic-search-result-holder>
    </div>
</semantic-search>
    </div>
  </div>
</div>